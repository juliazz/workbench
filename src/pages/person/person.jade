
w-loading(id="w-loading")
w-page(
  class="w-page pages-person"
)
  view(slot="header" class="header")
    view.left
      view.avator
        open-data(type="userAvatarUrl")
      view.welcome
        text HI,
        text.nickname {{caName}}
        w-icon(
          type="exit" size="small"
          bindtap="openPopup" data-type="outLoginShow"
        ) 
    view.right
      text(bindtap="openPopup" data-type="setNickNameShow") 设定昵称
      text(bindtap="resetPassword") 修改密码
  view(slot="content" class="content")
    view.record-title
      text.record 成单记录
      view.picker-box
        //- w-icon(type="calendar") 
        //- text 2019/01/01
        picker(
          data-type="from"
          bindchange="bindDateChange"
          mode="date" value="{{time.from}}" 
        ) {{time.from}}
        text 至
        picker(
          data-type="to"
          bindchange="bindDateChange"
          mode="date" value="{{time.to}}" 
        ) {{time.to}}
    view(
      class="list-area"
      wx:if!="{{shareHistoryList.length}}"
      wx:for="{{shareHistoryList}}"
      wx:for-index="index"
      wx:key="index"
    )
      view.cart-item
        view.title
          text 订单号: {{item.orderNo}}
          text {{item.createAt}}
        view.item-area(
          class="{{item.expand? 'expand_':'fold_'}}"
        )
          view.buy-info
            view.name 购买人姓名: {{item.deliveryName}}
            view.tel 购买人电话: {{item.deliveryPhone}}
            view.total-amount
              text 订单金额: 
              w-currency(value="{{item.totalAmount}}" class="oderPrize")
            view.logistics 物流 {{item.expressCompany}} {{item.expressNo}}
              
          view.item(
            wx:if!="{{item.listOrderProduct}}"
            wx:for="{{item.listOrderProduct}}"
            wx:key="idx"
            wx:for-index="idx"
            wx:for-item="subItem"
          )
            view.box
              image(
                mode="aspectFit"
                src="{{subItem.image}}"
              )
            view.box
              view.desc
                view.text {{subItem.productResult.name}}
                //- view.share-icon
                //-   image(
                //-     src=""
                  )
              text 数量: {{subItem.quantity}}
              view.currency-quantity
                w-currency(value="{{subItem.price}}" class="currency")
          view.expand.abs(
            data-index ="{{index}}"
            wx:if="{{item.expand}}"
            bindtap="expandEventer"

          )
            view.tap-area
              image(
                class
                src="../../assets/image/icon/up.png"
              )
          view.expand(
            wx:else
            data-index ="{{index}}"
            bindtap="expandEventer"
          )
            view.tap-area  
              image(
                src="../../assets/image/icon/down.png"
            )

  view(slot="footer" class="footer")
van-popup(
  z-index = '9999'
  closeable
  position="center"
  data-type = "setNickNameShow"
  show="{{ setNickNameShow }}" 
  bind:close="closePopup"
)
  view.content
    view.title(
    )  设定昵称
    input.nickInput( 
      placeholder-class="inputStyle"
      auto-focus placeholder="请输入昵称" value="{{nickname}}"
      bindinput="nickNameInput"
    )
    view.button-box
      w-button(
        data-type = "setNickNameShow"
        bindtap="closePopup"
      ) 取消
      w-button(
        bindtap="setNickName"
      ) 确定
van-popup(
  z-index = '9999'
  closeable
  position="center"
  closeOnClickOverlay="{{closeOnClickOverlay}}"
  show="{{ outLoginShow }}" 
  class="outLogin"
  data-type = "outLoginShow"
  bind:close="closePopup"
)
  view.content
    view.comfirm 确定要退出登录吗？
    view.button-box
      w-button(
        data-type = "outLoginShow"
        bindtap="closePopup"
      ) 取消
      w-button(
        bindtap="outLogin"
        
      ) 确定
      
  
